<form #f='ngForm' (ngSubmit)='onSubmit(user.id, f.value)' *ngIf='user; else loading'>
  <h6>Actualizar usuario</h6>
  <!-- {{ p | json }} -->
  <ng-container *ngIf='!f?.submitted; else submitting'>
    <mat-form-field class='full-width'>
      <input matInput type="text" placeholder='Nombre' [ngModel]='user.name' name='name' required>
    </mat-form-field>
    <mat-form-field class='full-width'>
      <textarea matInput rows='3' placeholder='Correo electrÃ³nico' [ngModel]='user.email' name='email' required>
      </textarea>
    </mat-form-field>
    <mat-form-field class="full-width">
      <mat-select placeholder='Lugar de trabajo' [ngModel]='user.workplace' name='workplace' required>
        <mat-option *ngFor='let workplace of workplaces | async' [value]='workplace.name'>
          {{ workplace.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <button mat-button type='submit' [disabled]='f.invalid'>Actualizar</button>
    <button mat-button type='button' (click)='onBack()'>Cancelar</button>
  </ng-container>
  <ng-template #submitting>
    <mat-spinner class='mx-auto'></mat-spinner>
  </ng-template>
</form>
<ng-template #loading>
  <mat-spinner class='mx-auto'></mat-spinner>
</ng-template>